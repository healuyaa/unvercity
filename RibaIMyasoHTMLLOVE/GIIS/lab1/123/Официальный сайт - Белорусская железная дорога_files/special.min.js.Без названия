/*!
 * v
 * Based on Bootstrap 3.3.0
 * bugs in template: westy.by@gmail.com 
 */ 
!function(){"use strict";var i=function(e,t,n){var o=(n=n||{}).expires;if("number"==typeof o&&o){var i=new Date;i.setTime(i.getTime()+1e3*o),o=n.expires=i}o&&o.toUTCString&&(n.expires=o.toUTCString());var s=e+"="+(t=encodeURIComponent(t));for(var a in n){s+="; "+a;var r=n[a];!0!==r&&(s+="="+r)}document.cookie=s},n=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},r={deepExtend:function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var o in n)n.hasOwnProperty(o)&&("object"==typeof n[o]?e[o]=r.deepExtend(e[o],n[o]):e[o]=n[o])}return e},getCookieSettings:function(){return{fontSize:n("fontSize")||r.standardSettings.fontSize,theme:n("theme")||r.standardSettings.theme,font:n("font")||r.standardSettings.font,letterSpacing:n("letterSpacing")||r.standardSettings.letterSpacing}},setMenu:function(o,i){var s=document.querySelectorAll("[data-"+o+"]");if(!s.length)return!1;r.buttons[i]=[];for(var a=0;a<s.length;a++)!function(e){var t=s[a],n=t.getAttribute("data-"+o);if(!n.length)return;r.buttons[i][a]=t,r.buttons[i][a].value=o+"-"+n,t.addEventListener("click",function(e){return e.preventDefault(),r.html[0].classList.remove(r.currentSettings[i]),r.currentSettings[i]=o+"-"+n,r.html[0].classList.add(r.currentSettings[i]),r.setSettings(),!1})}()},setMenus:function(){Object.keys(r.standardSettings).map(function(e){r.html[0].classList.remove(r.standardSettings[e])}),r.setMenu("special-fs","fontSize"),r.setMenu("special-theme","theme"),r.setMenu("special-font","font"),r.setMenu("special-ls","letterSpacing")},setSettings:function(){Object.keys(r.currentSettings).map(function(e,t){var n=r.currentSettings[e];i(e,n,{path:"/",domain:s.cookieDomain}),r.html[0].classList.add(n);for(var o=0;o<r.buttons[e].length;o++)r.buttons[e][o].classList.remove("active"),r.buttons[e][o].value===n&&r.buttons[e][o].classList.add("active")})},resetSettings:function(){Object.keys(r.currentSettings).map(function(e,t){r.html[0].classList.remove(r.currentSettings[e])}),r.currentSettings=r.deepExtend({},r.standardSettings),r.setSettings()},initDropdown:function(){if(!r.dropdownMenu.length)return!1;r.dropdownMenu[0].style.display="none",r.openDropdownBtn[0].addEventListener("click",function(e){e.preventDefault();var t="block";"block"===r.dropdownMenu[0].style.display&&(t="none"),r.dropdownMenu[0].style.display=t,r.openDropdownBtn[0].classList.toggle("active")}),r.closeDropdownBtn[0].addEventListener("click",function(e){e.preventDefault(),r.dropdownMenu[0].style.display="none",r.openDropdownBtn[0].classList.remove("active")}),r.resetBtn[0].addEventListener("click",function(e){e.preventDefault(),r.resetSettings()})},init:function(){if(this.body=document.querySelectorAll("body"),this.html=document.querySelectorAll("html"),this.menu=document.querySelectorAll(".special-menu"),this.dropdownMenu=document.querySelectorAll(".special-menu__dropdown"),this.openDropdownBtn=document.querySelectorAll(".special-menu__settings-btn"),this.closeDropdownBtn=document.querySelectorAll(".special-menu__close-btn"),this.resetBtn=document.querySelectorAll(".special-menu__reset-btn"),this.buttons={},!this.menu.length)return!1;this.standardSettings={fontSize:"special-fs-medium",theme:"special-theme-white",font:"special-font-trebuchet",letterSpacing:"special-ls-small"},this.currentSettings=this.getCookieSettings(),this.setMenus(),this.initDropdown(),this.setSettings()}},s={setCookie:function(e){i(s.const.cookieEnabledName,e,{path:"/",domain:s.cookieDomain})},enable:function(){s.head.append(s.metaViewport),s.body.addClass(s.const.bodyClass),s.setCookie("true"),s.isEnabled=!0},disable:function(){s.metaViewport.detach(),s.body.removeClass(s.const.bodyClass),s.setCookie("false"),s.window.trigger("resize"),s.isEnabled=!1},toggle:function(){!0===s.body.hasClass(s.const.bodyClass)?s.disable():s.enable()},setHandlers:function(){if(this.enableBtn=$(".js-spec-toogle"),!this.enableBtn.length)return!1;s.enableBtn.off("click.specVersion").on("click.specVersion",function(e){e.preventDefault(),s.toggle()})},loadStateFromCookie:function(){var e=n(s.const.cookieEnabledName);s.body.addClass("spec-version-avail"),"true"===e&&s.enable(),$(function(){s.setHandlers(),r.init()})},getUrlParams:function(){var o={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){o[t]=n}),o},checkUrl:function(){var e=s.getUrlParams()[s.const.urlParamName],t=n(s.const.cookieAvailName);"true"===e&&void 0===t&&(i(s.const.cookieAvailName,"true",{expires:1800,domain:s.cookieDomain,path:"/"}),this.loadStateFromCookie()),"true"===t&&this.loadStateFromCookie()},init:function(){this.window=$(window),this.body=$("body"),this.head=$("head"),this.metaViewport=$('<meta name="viewport" content="width=device-width, initial-scale=1">'),this.const={cookieDomain:".icons.by",cookieDomainTest:".belzhd.db.by",cookieEnabledName:"specVersionEnabled",cookieAvailName:"specVersionAvail",bodyClass:"spec-version",urlParamName:"spec"},this.cookieDomain=s.const.cookieDomain,-1<window.location.origin.indexOf("belzhd.db.by")&&(this.cookieDomain=this.const.cookieDomainTest),this.isEnabled=!1,this.loadStateFromCookie()}};s.init()}();